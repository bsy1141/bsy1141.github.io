<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Webpack Compiler hooks란? | Young-dev Log</title>
<meta name="keywords" content="webpack">
<meta name="description" content="Hugo 블로그 사용법과 Webpack Compiler hooks에 대한 상세한 설명을 제공합니다. 정적 사이트 생성기와 웹팩의 컴파일 과정을 이해해보세요.">
<meta name="author" content="Young">
<link rel="canonical" href="https://bsy1141.github.io/posts/%EC%B2%AB%EB%B2%88%EC%A7%B8-%ED%8F%AC%EC%8A%A4%ED%8A%B8/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css" integrity="sha256-j&#43;ECM6cGvIfy4Is8&#43;XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://bsy1141.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://bsy1141.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://bsy1141.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://bsy1141.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://bsy1141.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://bsy1141.github.io/posts/%EC%B2%AB%EB%B2%88%EC%A7%B8-%ED%8F%AC%EC%8A%A4%ED%8A%B8/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://bsy1141.github.io/posts/%EC%B2%AB%EB%B2%88%EC%A7%B8-%ED%8F%AC%EC%8A%A4%ED%8A%B8/">
  <meta property="og:site_name" content="Young-dev Log">
  <meta property="og:title" content="Webpack Compiler hooks란?">
  <meta property="og:description" content="Hugo 블로그 사용법과 Webpack Compiler hooks에 대한 상세한 설명을 제공합니다. 정적 사이트 생성기와 웹팩의 컴파일 과정을 이해해보세요.">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-09-07T17:16:05+09:00">
    <meta property="article:modified_time" content="2025-09-07T17:16:05+09:00">
    <meta property="article:tag" content="Webpack">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Webpack Compiler hooks란?">
<meta name="twitter:description" content="Hugo 블로그 사용법과 Webpack Compiler hooks에 대한 상세한 설명을 제공합니다. 정적 사이트 생성기와 웹팩의 컴파일 과정을 이해해보세요.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://bsy1141.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Webpack Compiler hooks란?",
      "item": "https://bsy1141.github.io/posts/%EC%B2%AB%EB%B2%88%EC%A7%B8-%ED%8F%AC%EC%8A%A4%ED%8A%B8/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Webpack Compiler hooks란?",
  "name": "Webpack Compiler hooks란?",
  "description": "Hugo 블로그 사용법과 Webpack Compiler hooks에 대한 상세한 설명을 제공합니다. 정적 사이트 생성기와 웹팩의 컴파일 과정을 이해해보세요.",
  "keywords": [
    "webpack"
  ],
  "articleBody": "Webpack Compiler hooks 란? webpack의 컴파일 과정에서 특정 시점에 사용자가 정의한 기능을 수행하고 싶을 수 있음 → 해당 로직을 가능하게 만드는 hook이라고 생각하면 됨.\n즉, Webpack의 전체 빌드 라이프사이클 중 시점에 사용자가 직접 정의한 로직을 삽입할 수 있도록 제공되는 이벤트 기반 인터페이스\ncompiler 객체로 접근 가능\nwebpack 함수는 webpack 설정 객체를 제공하며, 콜백함수가 제공되면 webpack 컴파일러를 실행\nconst webpack = require(\"webpack\"); webpack({}, (err, stats) =\u003e { if (err || stats.hasErrors()) { // ... } // 프로세싱 완료 }); 컴파일러 객체로 특정 hook을 호출할 수 있으므로, 컴파일러 객체가 무엇인지 알아야 호출 가능한 것이 아닌가?\nconst webpack = require(\"webpack\"); // 컴파일러 객체 생성 완료 ~ const compiler = webpack({ /* 옵션 */ }); 기본적인 사용 방법 아래에서 소개할 라이프 사이클 훅들은 compiler에 의해 노출됩니다. 아래와 같이 접근 할 수 있습니다. tap은 hook에 함수를 등록하는 방식이며, 'MyPlugin'은 디버깅용 식별자입니다. 훅 타입에 따라서 tapAsync와 tapPromise를 사용할 수 있습니다. const webpack = require(\"webpack\"); // 컴파일러 객체 생성 완료 ~ const compiler = webpack({ /* 옵션 */ }); // someHook에 다른 종류의 hook이 위치함 compiler.hooks.someHook.tap(\"MyPlugin\", (params) =\u003e { /* ... */ }); 잘 사용되는 Webpack Compiler Hooks 예시 Hook 이름 발생 시점 주 용도 beforeRun Webpack 실행 전에 호출 초기화, 로그, 캐시 체크 run 컴파일 시작 직전에 실행 (watch 모드 아닐 때) 외부 빌드 트리거 watchRun watch 모드에서 파일 변경 감지 후 실행 감시용 로직, 변경된 파일 추적 compile compilation 객체 생성 직전 compilation 설정 초기화 compilation compilation 객체가 생성될 때 내부 hooks 연결 (e.g. asset 가공 등) emit 결과물이 파일로 쓰이기 직전 파일 추가, 변경, 삭제 등 afterEmit emit 직후 실행됨 로그, 후처리 done 빌드가 모두 끝났을 때 완료 알림, 요약 로그, 종료 처리 빌드 완료 시점에 특정 로직을 실행하려면? 저희 팀에서는 서버 사이드 렌더링(SSR) 을 사용하는 일부 웹 애플리케이션을 운영하고 있습니다. SSR 환경에서는 서버에서 직접 빌드된 자바스크립트 파일을 읽어와야 하기 때문에, 일반적인 메모리 기반 빌드 파일 관리가 적합하지 않을 때가 있습니다. 그래서 빌드 파일을 실제 disk 경로에 저장하는 방식으로 운영하고 있습니다. 개발 모드 시(HMR)에도 역시 해당 빌드 파일을 읽어오는 방식이므로, 빌드 파일이 없더라도 webpack 컴파일 시, 빌드 완료 이후 app.js 실행을 기대하였지만 그렇게 진행되지 않았습니다. 따라서 done compiler hook을 이용하여 빌드 완료 시점에 app start 될 수 있도록 수정하였습니다. 참고 자료\nhttps://webpack.kr/api/compiler-hooks/ ",
  "wordCount" : "358",
  "inLanguage": "en",
  "datePublished": "2025-09-07T17:16:05+09:00",
  "dateModified": "2025-09-07T17:16:05+09:00",
  "author":{
    "@type": "Person",
    "name": "Young"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://bsy1141.github.io/posts/%EC%B2%AB%EB%B2%88%EC%A7%B8-%ED%8F%AC%EC%8A%A4%ED%8A%B8/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Young-dev Log",
    "logo": {
      "@type": "ImageObject",
      "url": "https://bsy1141.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://bsy1141.github.io/" accesskey="h" title="Young-dev Log (Alt + H)">Young-dev Log</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://bsy1141.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://bsy1141.github.io/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Webpack Compiler hooks란?
    </h1>
    <div class="post-description">
      Hugo 블로그 사용법과 Webpack Compiler hooks에 대한 상세한 설명을 제공합니다. 정적 사이트 생성기와 웹팩의 컴파일 과정을 이해해보세요.
    </div>
    <div class="post-meta"><span title='2025-09-07 17:16:05 +0900 KST'>September 7, 2025</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;358 words&nbsp;·&nbsp;Young

</div>
  </header> 
  <div class="post-content"><h3 id="webpack-compiler-hooks-란">Webpack Compiler hooks 란?<a hidden class="anchor" aria-hidden="true" href="#webpack-compiler-hooks-란">#</a></h3>
<ul>
<li>
<p>webpack의 컴파일 과정에서 <strong>특정 시점</strong>에 사용자가 정의한 기능을 수행하고 싶을 수 있음 → 해당 로직을 가능하게 만드는 hook이라고 생각하면 됨.</p>
</li>
<li>
<p>즉, Webpack의 전체 빌드 라이프사이클 중 시점에 사용자가 직접 정의한 로직을 삽입할 수 있도록 제공되는 이벤트 기반 인터페이스</p>
</li>
<li>
<p><code>compiler</code> 객체로 접근 가능</p>
<ul>
<li>
<p>webpack 함수는 webpack 설정 객체를 제공하며, 콜백함수가 제공되면 webpack 컴파일러를 실행</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">webpack</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#34;webpack&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">webpack</span>({}, (<span style="color:#a6e22e">err</span>, <span style="color:#a6e22e">stats</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">err</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">stats</span>.<span style="color:#a6e22e">hasErrors</span>()) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// 프로세싱 완료
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div></li>
<li>
<p>컴파일러 객체로 특정 hook을 호출할 수 있으므로, 컴파일러 객체가 무엇인지 알아야 호출 가능한 것이 아닌가?</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">webpack</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#34;webpack&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 컴파일러 객체 생성 완료 ~
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">compiler</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">webpack</span>({
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/* 옵션 */</span>
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div></li>
</ul>
</li>
</ul>
<h3 id="기본적인-사용-방법">기본적인 사용 방법<a hidden class="anchor" aria-hidden="true" href="#기본적인-사용-방법">#</a></h3>
<ul>
<li>아래에서 소개할 라이프 사이클 훅들은 compiler에 의해 노출됩니다. 아래와 같이 접근 할 수 있습니다.</li>
<li><code>tap</code>은 hook에 함수를 등록하는 방식이며, <code>'MyPlugin'</code>은 디버깅용 식별자입니다.</li>
<li>훅 타입에 따라서 tapAsync와 tapPromise를 사용할 수 있습니다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">webpack</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#34;webpack&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 컴파일러 객체 생성 완료 ~
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">compiler</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">webpack</span>({
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/* 옵션 */</span>
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// someHook에 다른 종류의 hook이 위치함
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">compiler</span>.<span style="color:#a6e22e">hooks</span>.<span style="color:#a6e22e">someHook</span>.<span style="color:#a6e22e">tap</span>(<span style="color:#e6db74">&#34;MyPlugin&#34;</span>, (<span style="color:#a6e22e">params</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/* ... */</span>
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h3 id="잘-사용되는-webpack-compiler-hooks-예시">잘 사용되는 Webpack Compiler Hooks 예시<a hidden class="anchor" aria-hidden="true" href="#잘-사용되는-webpack-compiler-hooks-예시">#</a></h3>
<table>
  <thead>
      <tr>
          <th>Hook 이름</th>
          <th>발생 시점</th>
          <th>주 용도</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>beforeRun</code></td>
          <td>Webpack 실행 전에 호출</td>
          <td>초기화, 로그, 캐시 체크</td>
      </tr>
      <tr>
          <td><code>run</code></td>
          <td>컴파일 시작 직전에 실행 (watch 모드 아닐 때)</td>
          <td>외부 빌드 트리거</td>
      </tr>
      <tr>
          <td><code>watchRun</code></td>
          <td><code>watch</code> 모드에서 파일 변경 감지 후 실행</td>
          <td>감시용 로직, 변경된 파일 추적</td>
      </tr>
      <tr>
          <td><code>compile</code></td>
          <td><code>compilation</code> 객체 생성 직전</td>
          <td><code>compilation</code> 설정 초기화</td>
      </tr>
      <tr>
          <td><code>compilation</code></td>
          <td><code>compilation</code> 객체가 생성될 때</td>
          <td>내부 hooks 연결 (e.g. asset 가공 등)</td>
      </tr>
      <tr>
          <td><code>emit</code></td>
          <td>결과물이 파일로 쓰이기 직전</td>
          <td>파일 추가, 변경, 삭제 등</td>
      </tr>
      <tr>
          <td><code>afterEmit</code></td>
          <td>emit 직후 실행됨</td>
          <td>로그, 후처리</td>
      </tr>
      <tr>
          <td><code>done</code></td>
          <td>빌드가 모두 끝났을 때</td>
          <td>완료 알림, 요약 로그, 종료 처리</td>
      </tr>
  </tbody>
</table>
<h3 id="빌드-완료-시점에-특정-로직을-실행하려면">빌드 완료 시점에 특정 로직을 실행하려면?<a hidden class="anchor" aria-hidden="true" href="#빌드-완료-시점에-특정-로직을-실행하려면">#</a></h3>
<ul>
<li>저희 팀에서는 서버 사이드 렌더링(SSR) 을 사용하는 일부 웹 애플리케이션을 운영하고 있습니다. SSR 환경에서는 서버에서 직접 빌드된 자바스크립트 파일을 읽어와야 하기 때문에, 일반적인 메모리 기반 빌드 파일 관리가 적합하지 않을 때가 있습니다. 그래서 빌드 파일을 실제 disk 경로에 저장하는 방식으로 운영하고 있습니다.</li>
<li>개발 모드 시(HMR)에도 역시 해당 빌드 파일을 읽어오는 방식이므로, 빌드 파일이 없더라도 webpack 컴파일 시, 빌드 완료 이후 app.js 실행을 기대하였지만 그렇게 진행되지 않았습니다.</li>
<li>따라서 <code>done</code> compiler hook을 이용하여 빌드 완료 시점에 app start 될 수 있도록 수정하였습니다.</li>
</ul>
<p><strong>참고 자료</strong></p>
<ul>
<li><a href="https://webpack.kr/api/compiler-hooks/">https://webpack.kr/api/compiler-hooks/</a></li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://bsy1141.github.io/tags/webpack/">Webpack</a></li>
    </ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://bsy1141.github.io/">Young-dev Log</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
